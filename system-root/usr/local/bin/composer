#!/usr/bin/env bash

##
# Composer wrapper: Use wordpress user rather than root if possible
##
if [ "$(whoami)" = "root" ]; then

  # Gather all arguments because string interpolation doesn't work for $@
  args=""
  for i in "$@"; do
      args="$args $i"
  done

  # Run as wordpress user instead
  # This helps that we don't install things as root
  su -s /bin/bash wordpress -c "/usr/local/bin/composer-script $args"
else
  /usr/local/bin/composer-script "$@"
fi

